<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zeno TV Premium</title>
<link href="https://vjs.zencdn.net/7.20.3/video-js.css" rel="stylesheet"/>
<style>
:root{
--accent:#ff0000;
--bg:#050505;
--card:#1a1a1a;
--gold:#ffd700;
}

body{margin:0;background:var(--bg);color:#fff;font-family:Segoe UI;overflow:hidden}

/* PLAYER */
#player-wrapper{
height:45vh;
width:100%;
position:fixed;
top:0;
left:0;
z-index:200;
background:#000;
}
.video-js{width:100%!important;height:100%!important}

/* UI */
#ui-overlay{
margin-top:45vh;
height:55vh;
overflow-y:auto;
scroll-behavior:smooth;
}

.tabs-container{
display:flex;
gap:10px;
padding:12px 20px;
background:#050505;
position:sticky;
top:0;
z-index:150;
overflow-x:auto;
}

.tab,.apk-btn,.search-btn,.recent-pill,.serial-fullscreen-btn{
padding:8px 14px;
border-radius:8px;
cursor:pointer;
border:2px solid transparent;
background:#222;
color:#eee;
font-weight:bold;
font-size:12px;
outline:none;
white-space:nowrap;
transition:.2s;
}

.serial-fullscreen-btn{
background:linear-gradient(135deg,#00f2ff,#007bff);
box-shadow:0 0 20px rgba(0,123,255,.6);
}

.tab:focus,.apk-btn:focus,.search-btn:focus,
.recent-pill:focus,.serial-fullscreen-btn:focus,.card:focus{
background:var(--accent)!important;
border-color:#fff!important;
transform:scale(1.08);
outline:none;
}

/* GRID */
.grid{
display:grid;
grid-template-columns:repeat(auto-fill,minmax(130px,1fr));
gap:15px;
padding:15px;
}

.card{
background:var(--card);
border-radius:12px;
cursor:pointer;
outline:none;
position:relative;
}

.logo-box{
height:75px;
display:flex;
align-items:center;
justify-content:center;
background:#111;
margin:4px;
border-radius:8px;
}

.logo-box img{width:70%;height:70%;object-fit:contain}

.name{
padding:6px;
font-size:11px;
font-weight:bold;
text-align:center;
white-space:nowrap;
overflow:hidden;
text-overflow:ellipsis;
}
</style>
</head>

<body>

<div id="player-wrapper">
<video id="tv-player" class="video-js vjs-default-skin" controls preload="auto"></video>
</div>

<div id="ui-overlay">

<div class="tabs-container">
<div class="tab" tabindex="0">সব</div>
<button class="serial-fullscreen-btn" tabindex="0" onclick="goFullscreen()">⛶ FULL</button>
</div>

<div id="channel-grid" class="grid"></div>
</div>

<script src="https://vjs.zencdn.net/7.20.3/video.min.js"></script>

<script>
const player = videojs('tv-player');

const m3uUrl='https://raw.githubusercontent.com/soheltanver85-a11y/Live-tv2/refs/heads/main/Live-tv2';

let allChannels=[];
let longPressTimer=null;

/* LOAD CHANNEL */
async function init(){
const res=await fetch(m3uUrl);
const data=await res.text();
const lines=data.split('\n');
let name="",logo="";
lines.forEach(line=>{
if(line.includes('#EXTINF')){
name=line.split(',').pop().trim();
logo=(line.match(/tvg-logo="([^"]+)"/)||[])[1]||"";
}
else if(line.startsWith('http')){
allChannels.push({name,url:line.trim(),logo});
}
});
renderGrid(allChannels);
}

function renderGrid(list){
const grid=document.getElementById('channel-grid');
grid.innerHTML='';
list.forEach((ch,index)=>{
const card=document.createElement('div');
card.className='card';
card.tabIndex=0;
card.innerHTML=`
<div class="logo-box">
<img src="${ch.logo}" onerror="this.src='https://via.placeholder.com/100?text=TV'">
</div>
<div class="name">${index+1}. ${ch.name}</div>
`;
card.onclick=()=>playChannel(ch);
card.onmousedown=()=>startLongPress(ch);
card.onmouseup=clearLongPress;
card.ontouchstart=()=>startLongPress(ch);
card.ontouchend=clearLongPress;
grid.appendChild(card);
});
}

function playChannel(ch){
player.src({src:ch.url,type:'application/x-mpegURL'});
player.play();
}

/* LONG PRESS FULLSCREEN */
function startLongPress(ch){
longPressTimer=setTimeout(()=>{
playChannel(ch);
setTimeout(()=>goFullscreen(),300);
},700);
}

function clearLongPress(){
clearTimeout(longPressTimer);
}

/* PLAYER ONLY FULLSCREEN */
function goFullscreen(){
const wrapper=document.getElementById('player-wrapper');
if(!document.fullscreenElement){
wrapper.requestFullscreen();
}else{
document.exitFullscreen();
}
}

/* TV REMOTE STABLE NAVIGATION */
function getFocusable(){
return Array.from(document.querySelectorAll('[tabindex="0"]'));
}

window.addEventListener('keydown',e=>{
const items=getFocusable();
const active=document.activeElement;
const index=items.indexOf(active);

if(e.key==="ArrowRight"){
if(index<items.length-1)items[index+1].focus();
e.preventDefault();
}

if(e.key==="ArrowLeft"){
if(index>0)items[index-1].focus();
e.preventDefault();
}

if(e.key==="ArrowDown"){
const firstCard=document.querySelector('.card');
if(firstCard)firstCard.focus();
e.preventDefault();
}

if(e.key==="Enter"){
active.click();
}
});

init();
</script>

</body>
</html>
