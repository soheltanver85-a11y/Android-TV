<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zeno TV - Android TV Edition</title>

<link href="https://vjs.zencdn.net/7.20.3/video-js.css" rel="stylesheet" />
<script src="https://vjs.zencdn.net/7.20.3/video.min.js"></script>

<style>
:root{
--primary:#e50914;
--bg:#000;
--card:#1b1b1b;
}

body{
margin:0;
background:var(--bg);
color:#fff;
font-family:sans-serif;
overflow:hidden;
}

/* Player */
#player-container{
position:absolute;
width:100%;
height:100vh;
z-index:1;
}

/* Sidebar */
.sidebar{
position:absolute;
left:0;
top:0;
width:260px;
height:100%;
background:rgba(0,0,0,0.85);
padding:60px 20px;
z-index:5;
display:flex;
flex-direction:column;
gap:15px;
}

.cat-item{
padding:15px;
border-radius:10px;
background:#111;
outline:none;
transition:0.2s;
}

.cat-item:focus{
background:var(--primary);
transform:scale(1.05);
}

/* Bottom Channel UI */
.bottom-ui{
position:absolute;
bottom:0;
width:100%;
padding:20px 80px;
background:linear-gradient(to top,black,transparent);
z-index:4;
}

.channel-row{
display:flex;
gap:25px;
overflow:hidden;
}

.card{
min-width:220px;
height:120px;
background:var(--card);
border-radius:12px;
display:flex;
align-items:center;
justify-content:center;
outline:none;
transition:0.2s;
border:3px solid transparent;
}

.card:focus{
border-color:var(--primary);
transform:scale(1.1);
background:#222;
}

.ui-hide{
opacity:0;
pointer-events:none;
transition:0.3s;
}
</style>
</head>

<body>

<div id="player-container">
<video id="tv-player" class="video-js vjs-default-skin" autoplay playsinline></video>
</div>

<div class="sidebar" id="sidebar">
<div class="cat-item" tabindex="0" onclick="filterCat('All')">All</div>
<div class="cat-item" tabindex="0" onclick="filterCat('News')">News</div>
<div class="cat-item" tabindex="0" onclick="filterCat('Sports')">Sports</div>
<div class="cat-item" tabindex="0" onclick="filterCat('Movies')">Movies</div>
</div>

<div class="bottom-ui" id="bottomUI">
<h3 id="currentCatName">All</h3>
<div class="channel-row" id="channelList"></div>
</div>

<script>
const m3uUrl='YOUR_M3U_LINK';
const player=videojs('tv-player');

let allChannels=[],currentChannels=[];
let uiTimer;

async function fetchData(){
const res=await fetch(m3uUrl);
const data=await res.text();
parseM3U(data);
}

function parseM3U(data){
const lines=data.split('\n');
for(let i=0;i<lines.length;i++){
if(lines[i].includes('#EXTINF')){
const name=lines[i].split(',')[1]||"Channel";
const url=lines[i+1]?.trim();
const group=lines[i].match(/group-title="([^"]+)"/)?.[1]||"All";
if(url) allChannels.push({name,url,group});
}
}
filterCat('All');
}

function filterCat(cat){
document.getElementById('currentCatName').innerText=cat;
if(cat==='All') currentChannels=allChannels;
else currentChannels=allChannels.filter(c=>c.group.includes(cat));
renderChannels();
}

function renderChannels(){
const list=document.getElementById('channelList');
list.innerHTML='';

currentChannels.forEach((ch,index)=>{
const card=document.createElement('div');
card.className='card';
card.tabIndex=0;
card.innerHTML=ch.name;

card.onfocus=()=>{
player.src({type:'application/x-mpegURL',src:ch.url});
player.play();
card.scrollIntoView({behavior:"smooth",inline:"center"});
showUI();
};

card.onkeydown=(e)=>{
if(e.key==='ArrowRight') card.nextSibling?.focus();
if(e.key==='ArrowLeft') card.previousSibling?.focus();
if(e.key==='ArrowUp') document.querySelector('.cat-item').focus();
};

list.appendChild(card);
});

/* First channel auto focus */
setTimeout(()=>{
document.querySelector('.card')?.focus();
},500);
}

function showUI(){
document.getElementById('bottomUI').classList.remove('ui-hide');
clearTimeout(uiTimer);
uiTimer=setTimeout(()=>{
document.getElementById('bottomUI').classList.add('ui-hide');
},6000);
}

/* Android TV Remote Back Button */
document.addEventListener('keydown',function(e){
if(e.keyCode===461 || e.keyCode===8){
document.querySelector('.card')?.focus();
}
});

fetchData();
</script>
</body>
</html>
